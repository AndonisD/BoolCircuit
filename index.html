<!DOCTYPE html>

<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height,user-scalable=yes, initial-scale=1.0" />

		<title>BoolMin</title>

		<meta name="apple-mobile-web-app-status-bar" content="#aa7700">
  		<meta name="theme-color" content="#313338">
 
		<link rel="manifest" href="manifest.json">

		<link rel="stylesheet" href="style.css" />
		<script src="https://kit.fontawesome.com/a1b3d7504f.js" crossorigin="anonymous"></script>

		
		
	</head>
	
	<body bgcolor="#313338">
		<header>
			<div class="top_bar" style="border-bottom: solid #E5E6E9;">
				<div class="logo_container">
					<img style="height: 30px; left: 100%;" src="https://fontmeme.com/permalink/230408/b0698910e76c71bb85eae67c9fcecdc2.png" alt="pixel-fonts" border="0">
					<div class="margin">
						v1.0.0
					</div>
				</div>
				<div class="top_container">
					<div class="icon_container info_button" id="info_button">
						Help
					</div>
						<a class="icon_container" href="https://github.com/AndonisD/BoolCircuit" style="text-decoration: none;">
							<i class="fa-brands fa-github fa-2xl" style="color: #ffffff;"></i>
						</a>
				</div>
			</div>
		</header>
		
		<div class="flex-container-hor">
			<!-- <br> -->
			<div id="allSampleContent" class="p-4 w-full circuit_container">
				<div id="sample">
					<br>
					<div style="width: 100%; display: flex; justify-content: flex-start; ">
						<div
							class="pallete_container"
							id="palette"
							style="
								width: 100px;
								height: 480px;
								margin-right: 2px;
								background-color: #E5E6E9;
								border: 1px solid black;
								position: relative;
								-webkit-tap-highlight-color: rgba(255, 255, 255, 0);
								cursor: auto;
								border-radius: 10px;
							"
						>
							<canvas
								tabindex="0"
								width="147"
								height="747"
								style="
									fillStyle:#E5E6E9;
									position: absolute;
									top: 0px;
									left: 0px;
									z-index: 2;
									user-select: none;
									touch-action: none;
									width: 98px;
									height: 498px;
									cursor: auto;
								"
								>This text is displayed if your browser does not support the
								Canvas HTML element.</canvas
							>
							<div
								style="
									position: absolute;
									overflow: auto;
									width: 98px;
									height: 498px;
									z-index: 1;
								"
							>
								<div style="position: absolute; width: 1px; height: 1px"></div>
							</div>
						</div>
						<div class="circuit_canvas" id="myDiagramDiv" " style=" width: 500px; height: 480px;
						border: 1px solid black; position: relative; background-color: #E5E6E9;
						-webkit-tap-highlight-color: rgba(255, 255, 255, 0); cursor: auto; border-radius: 10px;">
						<canvas
							class="circuit_canvas"
							tabindex="0"
							width="1402"
							height="747"
							data-intro='Hello step one!'
							style="
								fillStyle:#E5E6E9;
								position: relative;
								top: 0px;
								left: 0px;
								z-index: 2;
								user-select: none;
								touch-action: none;
								width: 498px;
								height: 498px;
								cursor: auto;
								
							"
							>This text is displayed if your browser does not support the
							Canvas HTML element.</canvas
						>
						<div
							style="
								position: absolute;
								overflow: auto;
								width: 935px;
								height: 498px;
								z-index: 1;
							"
						>
							<div style="position: absolute; width: 1px; height: 1px"></div>
						</div>
					</div>
				</div>
				<div style=" width: 600px">
					<div class="margin" style="display: flex; justify-content: space-between;">
						<div>
							<button class="submit_button save_button" id="saveModel" onclick="saveJson()">Save</button>
							<label for="file-upload" class="submit_button submit_label">Load</label>
						</div>
						<div>
							<button class="help_button" id = "help_button">Help</button>
							<button class="arrange_button submit_button" onclick="arrange()">Arrange</button>
							<button class="submit_circuit submit_button" id="submit_circuit">Submit</button>
							<div class="tooltip">
								<i class="fas fa-info-circle fa-sm circuit_info"></i>
								<span class="tooltiptext top">To submit your circuit, it must have:
									- at least 1 input
									- only AND, OR, NOT gates
									- exactly 1 output
								</span>
							</div>
						</div>
					</div>
					<input id="file-upload" type="file"/>
					<!-- Diagram Model saved in JSON format: -->
					<textarea hidden id="mySavedModel" style="width: 100%; height: 200px">
{ "class": "GraphLinksModel",
  "linkFromPortIdProperty": "fromPort",
  "linkToPortIdProperty": "toPort",
  "nodeDataArray": [],
  "linkDataArray": []}
					</textarea>
				</div>
			</div>
			</div>
			<div class="flex-container-vert">
				<div class = "border expression_container">
					<div class="margin">
						<div class="tooltip">
							<i class="fas fa-info-circle fa-sm"></i>
							<span class="tooltiptext">Enter a  valid boolean expression. e.g.

								a and (not b or c)
							</span>
						</div>
						Expression:
						<!-- <span
							class="input"
							id="expression_input"
							role="textbox"
							contenteditable
						></span> -->
						<!-- <input type="text" class="input" id="expression_input"> -->
						<textarea name="" class="input" rows="1" id="expression_input"></textarea>
						<input class="submit_button" type="button" id="submit_expression" value="Submit" />
					</div>
				</div>
				<div class="table-container ">
					<div class="flex-container-vert" style="padding: 0px;">
						<div class="border function_container">
						<div class="margin">
						<div class="info_box">
							Boolean Function
							<div class="tooltip">
								<i class="fas fa-info-circle fa-sm"></i>
								<span class="tooltiptext">Enter comma-separated lists defining a boolean function. e.g.
									
										a,b,c
										3,6,7
										1,4		
								</span>
							</div>
						</div>
						<div class="flex-container-vert">
							<div class="function_label">
							Variable names:
							</div>
							<!-- <span
								class="input right"
								id="vars_input"
								role="textbox"
								contenteditable
							></span> -->
							<input type="text" class="input right" id="vars_input">
							<div class="function_label">

							Minterms:
							</div>
							<!-- <span
								class="input right"
								id="minterms_input"
								role="textbox"
								contenteditable
							></span> -->
							<input type="text" class="input right" id="minterms_input">
							<div class="function_label">
								Don't care terms:
							</div>
							<!-- <span
								class="input right"
								id="dontcare_input"
								role="textbox"
								contenteditable
							></span> -->
							<input type="text" class="input right" placeholder="Optional" id="dontcare_input">
						</div>
						<br>
						<input class="submit_button left-margin" type="button" id="submit_table" value="Submit" />
					</div>
				</div>
			
						<div class="border min_container">
						<div class="margin">
						<div class="info_box">
							Minimised Expressions
							<div class="tooltip">
								<i class="fas fa-info-circle fa-sm min_info"></i>
								<span class="tooltiptext">The minimised expressions will appear here. Press on the arrows to check them out!</span>
							</div>
						</div>
						<div class="flex-container-vert">
							<div class="function_label">
								DNF:
							</div>
							<div class="minimised_field">
								<span
									class="input"
									id="min_DNF"
									role="textbox"
								></span>
								<input class="go_button" type="button" id="go_DNF" value=">" />
							</div>
							<div class="function_label">
								CNF:
							</div>
							<div class="minimised_field">
								<span
									class="input"
									id="min_CNF"
									role="textbox"
								></span>
								<input class="go_button" type="button" id="go_CNF" value=">" />
							</div>
						</div>
					</div>
					</div>
					<div class="error_container" id="error-message">
						Error message
					</div>
					</div>
					<div class="border table_container"style="margin-right: auto; min-width: 245px;">
						<div class="margin">
							<div class="flex-container-vert" style="">
								Truth table
								<div id="table" class="truth_table"></div>
							</div>
						</div>
					</div>
					
				</div>
			</div>
		</div>

		<!-- <input id="input" type="text" name="fname" style="width: 200px" /><br /> -->
	</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.min.js"></script>
	<script src="https://unpkg.com/gojs@2.2.18/release/go.js"></script>
	<link href="https://unpkg.com/intro.js/minified/introjs.min.css" rel="stylesheet"> 
	<script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>
	<script type="module" src="./mediator.js"></script>
	<script src="https://unpkg.com/gojs@2.2.18/extensions/Figures.js"></script>
	<script src="circuitEditor.js"></script>
	<script>
		window.addEventListener('load', () => {
		  registerSW();
		});
	 
		// Register the Service Worker
		async function registerSW() {
		  if ('serviceWorker' in navigator) {
			try {
			  await navigator
					.serviceWorker
					.register('serviceworker.js');
			}
			catch (e) {
			  console.log('SW registration failed');
			}
		  }
		}
	 </script>
</html>
