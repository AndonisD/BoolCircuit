<!DOCTYPE html>

<html>
	<head>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.min.js"></script>
		<script src="https://unpkg.com/gojs@2.2.18/release/go.js"></script>
		<link href="https://unpkg.com/intro.js/minified/introjs.min.css" rel="stylesheet"> 
		<script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>
		<script type="module" src="./mediator.js"></script>
		<script type="module" src="./modules/circuitController.js"></script>
		<link rel="stylesheet" href="style.css" />
		<script src="https://kit.fontawesome.com/a1b3d7504f.js" crossorigin="anonymous"></script>
		
	</head>

	
	<body bgcolor="#313338">
		<header>
			<div class="top_bar" style="border-bottom: solid #E5E6E9;">
				<div class="logo_container">
					<img style="height: 30px; left: 100%;" src="https://fontmeme.com/permalink/230407/714842a4c8050a8c984484ae7621f3e4.png" alt="pixel-fonts" border="0">
				</div>
				<div class="top_container">
					<div class="icon_container info_button">
						<i class="fa-solid fa-circle-info fa-2xl" id="info_button" style="color: #ffffff;"></i>
					</div>
					<a href="https://github.com/AndonisD/BoolCircuit" style="text-decoration: none;">
						<div class="icon_container">
							<i class="fa-brands fa-github fa-2xl" style="color: #ffffff;"></i>
						</div>
					</a>
				</div>
				
				
			</div>
		</header>
		
		<div class="flex-container-hor">
			<!-- <br> -->
			<div id="allSampleContent" class="p-4 w-full circuit_container">
				<div id="sample">
					<br>
					<div style="width: 100%; display: flex; justify-content: flex-start; ">
						<div
							class="pallete_container"
							id="palette"
							style="
								width: 100px;
								height: 480px;
								margin-right: 2px;
								background-color: #E5E6E9;
								border: 1px solid black;
								position: relative;
								-webkit-tap-highlight-color: rgba(255, 255, 255, 0);
								cursor: auto;
								border-radius: 10px;
							"
						>
							<canvas
								tabindex="0"
								width="147"
								height="747"
								style="
									fillStyle:#E5E6E9;
									position: absolute;
									top: 0px;
									left: 0px;
									z-index: 2;
									user-select: none;
									touch-action: none;
									width: 98px;
									height: 498px;
									cursor: auto;
								"
								>This text is displayed if your browser does not support the
								Canvas HTML element.</canvas
							>
							<div
								style="
									position: absolute;
									overflow: auto;
									width: 98px;
									height: 498px;
									z-index: 1;
								"
							>
								<div style="position: absolute; width: 1px; height: 1px"></div>
							</div>
						</div>
						<div class="circuit_canvas" id="myDiagramDiv" " style=" width: 500px; height: 480px;
						border: 1px solid black; position: relative; background-color: #E5E6E9;
						-webkit-tap-highlight-color: rgba(255, 255, 255, 0); cursor: auto; border-radius: 10px;">
						<canvas
							class="circuit_canvas"
							tabindex="0"
							width="1402"
							height="747"
							data-intro='Hello step one!'
							style="
								fillStyle:#E5E6E9;
								position: relative;
								top: 0px;
								left: 0px;
								z-index: 2;
								user-select: none;
								touch-action: none;
								width: 498px;
								height: 498px;
								cursor: auto;
								
							"
							>This text is displayed if your browser does not support the
							Canvas HTML element.</canvas
						>
						<div
							style="
								position: absolute;
								overflow: auto;
								width: 935px;
								height: 498px;
								z-index: 1;
							"
						>
							<div style="position: absolute; width: 1px; height: 1px"></div>
						</div>
					</div>
				</div>
				<div style=" width: 600px">
					<div class="margin" style="display: flex; justify-content: space-between;">
						<div>
							<button class="submit_button" id="saveModel" onclick="saveJson()">Save</button>
							<label for="file-upload" class="submit_button submit_label">Load</label>
						</div>
						<div>
							<button class="submit_button" onclick="arrange()">Arrange</button>
							<button class="submit_button" id="submit_circuit">Submit</button>
							<div class="tooltip">
								<i class="fas fa-info-circle fa-sm"></i>
								<span class="tooltiptext top">To submit your circuit, it must have:
									- at least 1 input
									- only AND, OR, NOT gates
									- exactly 1 output
								</span>
							</div>
						</div>
					</div>
					<input id="file-upload" type="file"/>
					<!-- Diagram Model saved in JSON format: -->
					<textarea hidden id="mySavedModel" style="width: 100%; height: 200px">
{ "class": "GraphLinksModel",
  "linkFromPortIdProperty": "fromPort",
  "linkToPortIdProperty": "toPort",
  "nodeDataArray": [],
  "linkDataArray": []}
					</textarea>
				</div>
			</div>
			</div>
			<div class="flex-container-vert">
				<div class = "border expression_container">
					<div class="margin">
						<div class="tooltip">
							<i class="fas fa-info-circle fa-sm"></i>
							<span class="tooltiptext">Enter a  valid boolean expression. e.g.

								a and (not b or c)
							</span>
						</div>
						Boolean Expression:
						<span
							class="input"
							id="expression_input"
							role="textbox"
							contenteditable
						></span>
						<input class="submit_button" type="button" id="submit_expression" value="Submit" />
					</div>
				</div>
				<div class="table-container ">
					<div class="flex-container-vert" style="padding: 0px;">
						<div class="border function_container">
						<div class="margin">
						<div class="info_box">
							Boolean Function
							<div class="tooltip">
								<i class="fas fa-info-circle fa-sm"></i>
								<span class="tooltiptext">Enter comma-separated lists. e.g.
									
										a,b,c
										3,6,7
										1,4		
								</span>
							</div>
						</div>
						<div class="flex-container-vert">
							<div class="function_label">
							Variable names:
							</div>
							<span
								class="input right"
								id="vars_input"
								role="textbox"
								contenteditable
							></span>
							<div class="function_label">

							Minterms:
							</div>
							<span
								class="input right"
								id="minterms_input"
								role="textbox"
								contenteditable
							></span>
							<div class="function_label">
								Don't care terms:
							</div>
							<span
								class="input right"
								id="dontcare_input"
								role="textbox"
								contenteditable
							></span>
						</div>
						<br>
						<input class="submit_button" type="button" id="submit_table" value="Submit" />
					</div>
				</div>
			
						<div class="border min_container">
						<div class="margin">
						<div class="info_box">
							Minimised Expressions
							<div class="tooltip">
								<i class="fas fa-info-circle fa-sm min_info"></i>
								<span class="tooltiptext">The minimised expressions will appear here. Press on the arrows to check them out!</span>
							</div>
						</div>
						<div class="flex-container-vert">
							<div class="function_label">
								DNF:
							</div>
							<div class="minimised_field">
								<span
									class="input"
									id="min_DNF"
									role="textbox"
								></span>
								<input class="go_button" type="button" id="go_DNF" value=">" />
							</div>
							<div class="function_label">
								CNF:
							</div>
							<div class="minimised_field">
								<span
									class="input"
									id="min_CNF"
									role="textbox"
								></span>
								<input class="go_button" type="button" id="go_CNF" value=">" />
							</div>
						</div>
					</div>
					</div>
					<div class="error_container" id="error-message">
						This is an error message
					</div>
					</div>
					<div class="border table_container"style="margin-right: auto; min-width: 245px;">
						<div class="margin">
							<div class="flex-container-vert" style="">
								Truth table
								<div id="table" class="margin"></div>
							</div>
						</div>
					</div>
					
				</div>
			</div>
		</div>

		<!-- <input id="input" type="text" name="fname" style="width: 200px" /><br /> -->
	</body>
	<script src="https://unpkg.com/gojs@2.2.18/extensions/Figures.js"></script>
	<script src="circuitEditor.js"></script>
	<script>
		
		
		document.getElementById("info_button").addEventListener("click", () => {
			const expression = 'a and b or b and c or (not b or c)'
			document.getElementById("expression_input").innerHTML = expression;
			document.getElementById("submit_expression").click();

			introJs().setOptions({
				showProgress: true,
				showBullets: false,
				disableInteraction: false,
				tooltipClass: 'customTooltip',
				steps: [{
						title: "Welcome to  <img style='height: 30px; left: 100%; margin-top:5px' src='https://fontmeme.com/permalink/230407/714842a4c8050a8c984484ae7621f3e4.png' alt='pixel-fonts' border='0'>",
						intro: "Lightweight combinational logic circuit visualiser"
					},
					{
						intro: 'There are 3 ways for you to input and interact with boolean functions...'
					},
					{
						title: 'Circuits',
						element: document.querySelector('.circuit_container'),
						intro: 'This is the circuit editor. You can build your logic circuits here.'
					},
					{
						title: 'Boolean Expressions',
						element: document.querySelector('.expression_container'),
						intro: 'Or you can input a boolean expression'
					},
					{
						title: 'Boolean Functions',
						element: document.querySelector('.function_container'),
						intro: 'Or define a boolean function directly'
					},
					{
						title: 'Truth Tables',
						element: document.querySelector('.table_container'),
						intro: 'This is where the truth table will appear'
					},
					{
						title: 'Minimisation',
						element: document.querySelector('.min_container'),
						intro: 'You can also view the minimised forms of your functions!'
					},
					{
						element: document.querySelector('.min_info'),
						intro: 'Hover over these for more info'
					},
					{
						title: "<img style='height: 30px; left: 100%;' src='https://fontmeme.com/permalink/230407/714842a4c8050a8c984484ae7621f3e4.png' alt='pixel-fonts' border='0'>",
						intro: "Have fun exploring the world of combinational logic!"
					},
				]
			}).start();

			// {
			// 			element: document.querySelector('.pallete_container'),
			// 			intro: "These are the components you'll need to build a circuit. <br> Hover over a component if you're unsure of what it is."
			// 		},
			// 		{
			// 			element: document.querySelector('.circuit_canvas'),
			// 			intro: "This is the canvas where you can build your circuits."
			// 		},
			// 		{
			// 			element: document.querySelector('.circuit_canvas'),
			// 			intro: "Once you've dragged the components here, you can start wiring them! Drag from one component to the other to make a wire."
			// 		},
			// 		{
			// 			element: document.querySelector('.circuit_canvas'),
			// 			intro: "Once you have a complete circuit with with inputs and outputs, double-tap on the input nodes and watch your circuit come to life!"
			// 		},
			// 		{
			// 			element: document.querySelector('.circuit_canvas'),
			// 			intro: "Once you have a complete circuit with with inputs and outputs, double-tap on the input nodes and watch you circuit come to life!"
			// 		},
			
		});
		
	</script>
</html>
